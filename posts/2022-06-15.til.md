---
date: 2022-06-15
category: til, cors
---

## 오늘 한 일

- til 블로그 fe,be 작성
- til 블로그 ec2 에 배포
- til 블로그 아이피만 도메인으로 변경

## 어려운점

- ec2 가격을 정확히 모르겠다.
  - 프리 플랜의 ec2 사양대로 계산기를 돌려보니
  - 한달에 6천원 정도 나온다고 결과가 나왔다.
  - 거기에 예약 플랜을 넣어주면 조금 더 저렴해 지긴 했다.
  - 그런데 아직 공짜 기간이 남았고 계정도 몇개 더 만들 수 있어서 놔두려고 한다.
  - 다만 슬슬 가격을 알고 하나 둘 늘려야 되기 때문에 학습이 필요할 것 같다고 생각했다.
  - 특히 cicd 를 구축하는데 필요한 것들은 꾸준히 학습 할 필요가 있다는 생각을 했다.
- 배포를 오랜만에 하다보니 cors 에서 헤매었다.
  - ec2 안에 백엔드와 프론트앤드 둘다 넣어놨는데
  - 프론트에서 localhost 로 백엔드에 접근하면 될 줄 알았는데 안됬다.
  - 그리고 cors 다 포트를 맞게 해준 것 같았는데 오류가 계속 떳다 안떳다 했고
  - 설상가상 프론트 파일을 빌드 할때마다 계속 ec2 가 멈춰서 재부팅을 계속 해줬다.
  - cors 의 문제는 정확히 ip 를 모두 .env 에 넣어서 입력 해주니 잘 작동했다.
  - 하... localhost라는 글자 127.0.0.1 이라는 숫자도 개발할때 말고는 쓰면 안되겠다!!
- firebase 는 이미지 저장소로 활용 하자.
  - 처음에는 블로그를 firebase 로 만들고 배포 하려 했다.
  - 마크다운 파일을 파이어 베이스에 집어넣고 빼는 방법을 못 찾아서 결국
  - ec2 에 백엔드와 프론트를 다 넣어줬는데
  - 그래도 파이어 베이스에 이미지 올리는 방법을 알게 됬다.
  - 5기가까지 공짜 라고 하니 잘 쓰면 될 것 같았다.

## 해야 할 일

- 블로그 고칠게 많다. 시간을 계속 투자하자.
- 일단 ui 가 구리다.
- 다른사이트를 보고 참고해서
- 하루에 1개씩만 약간씩만 꾸준히 수정을 해주자
- 백엔드는 필히 자동배포 과정을 넣어줘야 한다.
- 이거 til 하나쓰고 클론받아서 다시 배포하거나 ftp 로 파일올리고 등등
- 못할 짓인 것 같다. 자동배포 하는것 학습도 꾸준히 해야 한다.
- timeout 프로젝트 프론트 부분 작성 슬슬 시작하면 될 것 같다.
  - rtk 가 엄청 좋은줄 알았는데 한 페이지에서 통신 요청이 많아질때는
  - 별로였다. 받은 데이터를 계속 바꿔서 다른 저장소에 넣어주고 해야 했는데
  - 타입 지정하가 번거로웠다 이럴바에 차라리 thunk 쓰고 말지. 라는 생각을 했다.
  - timeout 프로젝트는 thunk 로 작성하면서 axios 의 cach를 이용하면 될 것 같다고 생각했다.
